<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8" />
<meta name="description" content="This is a simple and fast tool to calculate your networks and subnets the easy way." />
<title>Subnet Calculator - justinverstijnen.nl</title>
<style>
  /* Basisreset */
  * {
    box-sizing: border-box;
  }
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: #f9fafb;
    margin: 0;
    padding: 2rem;
    color: #2e3440;
  }
  h1 {
    text-align: center;
    font-weight: 700;
    margin-bottom: 2rem;
    color: #1f2937;
  }
  /* Container */
  .container {
    max-width: 912px;
    margin: 0 auto;
    background: white;
    border-radius: 10px;
    padding: 2rem 2.5rem;
    box-shadow: 0 8px 24px rgb(100 116 139 / 0.1);
  }
  /* Form layout */
  form {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1.2rem 2rem;
    align-items: center;
    margin-bottom: 2rem;
  }
  label {
    font-weight: 600;
    font-size: 0.9rem;
    color: #374151;
  }
  input[type="text"],
  select,
  input[type="number"] {
    padding: 0.55rem 0.75rem;
    font-size: 1rem;
    border: 1px solid #d1d5db;
    border-radius: 6px;
    transition: border-color 0.3s ease;
    width: 100%;
  }
  input[type="text"]:focus,
  select:focus,
  input[type="number"]:focus {
    outline: none;
    border-color: #8EAFDA;
    box-shadow: 0 0 6px #2563ebaa;
  }
  button {
    grid-column: 1 / -1;
    background: #8EAFDA;
    color: white;
    font-weight: 700;
    font-size: 1.1rem;
    padding: 0.85rem;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    transition: background-color 0.3s ease;
  }
  button:hover {
    background: #637b99;
  }
  /* Error message */
  .error {
    color: #dc2626;
    font-weight: 600;
    margin-bottom: 1rem;
    text-align: center;
  }
  /* Result box */
  .result {
  background: #e0e6f8;
  border: 1px solid #8EAFDA;
  border-radius: 8px;
  padding: 1.5rem 2rem;
  box-shadow: inset 0 0 12px #8EAFDA88;
  color: #1e2a4a;
  font-weight: 600;
  margin-bottom: 1.5rem;
}
.result h2 {
  color: #294172;
  margin-top: 0;
  margin-bottom: 1rem;
  font-weight: 700;
  text-align: center;
}
.result table {
  width: 100%;
  border-collapse: collapse;
  font-size: 1.05rem;
}
.result table td:first-child {
  font-weight: 700;
  color: #1e40af;
  padding: 8px 12px 8px 0;
  width: 45%;
}
.result table td:last-child {
  padding: 8px 0 8px 12px;
  color: #303136;
}

/* Groen blok met prefix table */
#subnet-table {
  background: #daf5dc; /* zacht groen */
  border: 1px solid #8bc34a;
  border-radius: 8px;
  padding: 1rem 1.5rem;
  box-shadow: inset 0 0 8px #8bc34a66;
  color: #3a5f0b;
  font-weight: 600;
  max-width: 912px;
  margin: 0 auto 2rem auto;
  overflow-x: auto;
}
#subnet-table h3 {
  text-align: center;
  margin-top: 0;
  margin-bottom: 1rem;
  font-weight: 700;
  color: #4caf50;
}
#subnet-table table {
  width: 100%;
  border-collapse: collapse;
  font-size: 0.95rem;
}
#subnet-table th, #subnet-table td {
  border: 1px solid #8bc34a;
  padding: 6px 12px;
  text-align: center;
}
#subnet-table th {
  background-color: #a5d6a7;
  color: #2e7d32;
  font-weight: 700;
}
#subnet-table tr:nth-child(even) {
  background-color: #c8e6c9;
}
  .result p {
    margin: 0.4rem 0;
    font-size: 1.05rem;
  }
  .result strong {
    color: #303136;
  }
  .logo-link {
  display: block;
  text-align: center;
  margin-bottom: 1rem;
}
.logo {
  max-width: 50px;
  height: auto;
  user-select: none;
  pointer-events: auto;
}
  .tooltip {
  position: relative;
  cursor: pointer;
  color: #1e40af;
  font-weight: 600;
}

.tooltip-text {
  visibility: hidden;
  position: absolute;
  left: 0;
  top: 100%;
  background-color: #ffffff;
  color: #333333;
  border: 1px solid #8EAFDA;
  border-radius: 8px;
  padding: 8px;
  font-size: 0.9rem;
  width: 250px
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  z-index: 100;
  opacity: 0;
  transition: opacity 0.3s ease, visibility 0s 0.3s;
}

.tooltip:hover .tooltip-text {
  visibility: visible;
  opacity: 1;
  transition: opacity 0.3s ease;
}

.tooltip-text::before {
  content: "";
  position: absolute;
  left: 10px;
  top: -6px;
  border-left: 6px solid transparent;
  border-right: 6px solid transparent;
  border-bottom: 6px solid #8EAFDA;
}
  /* Responsive */
  @media (max-width: 480px) {
    form {
      grid-template-columns: 1fr;
      gap: 1rem;
    }
    button {
      grid-column: 1;
    }
  }
</style>
</head>
<body>
<div class="container">
  <a href="https://justinverstijnen.nl" target="_blank" rel="noopener noreferrer" class="logo-link">
    <img src="https://justinverstijnen.nl/wp-content/uploads/2025/04/cropped-Logo-2.0-Transparant.png" alt="Justin Verstijnen Logo" class="logo" />
  </a>
  <h1>Subnet Calculator</h1>
  <form id="subnet-form" novalidate>
    <label for="ip">IP address*</label>
    <input type="text" id="ip" name="ip" placeholder="ex. 192.168.1.0" required />
    
<label for="cidr">Subnet mask*</label>
    <select id="cidr" name="cidr" required>
      <option value="">-- Choose subnet mask --</option>
      <option value="8">/8 - 255.0.0.0</option>
      <option value="9">/9 - 255.128.0.0</option>
      <option value="10">/10 - 255.192.0.0</option>
      <option value="11">/11 - 255.224.0.0</option>
      <option value="12">/12 - 255.240.0.0</option>
      <option value="13">/13 - 255.248.0.0</option>
      <option value="14">/14 - 255.252.0.0</option>
      <option value="15">/15 - 255.254.0.0</option>
      <option value="16">/16 - 255.255.0.0</option>
      <option value="17">/17 - 255.255.128.0</option>
      <option value="18">/18 - 255.255.192.0</option>
      <option value="19">/19 - 255.255.224.0</option>
      <option value="20">/20 - 255.255.240.0</option>
      <option value="21">/21 - 255.255.248.0</option>
      <option value="22">/22 - 255.255.252.0</option>
      <option value="23">/23 - 255.255.254.0</option>
      <option value="24">/24 - 255.255.255.0</option>
      <option value="25">/25 - 255.255.255.128</option>
      <option value="26">/26 - 255.255.255.192</option>
      <option value="27">/27 - 255.255.255.224</option>
      <option value="28">/28 - 255.255.255.240</option>
      <option value="29">/29 - 255.255.255.248</option>
      <option value="30">/30 - 255.255.255.252</option>
      <option value="31">/31 - 255.255.255.254</option>
      <option value="32">/32 - 255.255.255.255</option>
    </select>
    
    <label for="ip-presets">Templates</label>
    <select id="ip-presets" aria-label="Choose template">
      <option value="">-- Choose template --</option>
      <option value="10.0.0.0">Private Class A (10.0.0.0)</option>
      <option value="172.16.0.0">Private Class B (172.16.0.0)</option>
      <option value="192.168.0.0">Private Class C (192.168.0.0)</option>
      <option value="127.0.0.1">Loopback (127.0.0.1)</option>
      <option value="169.254.0.0">Link-local (169.254.0.0)</option>
      <option value="224.0.0.0">Multicast (224.0.0.0)</option>
      <option value="255.255.255.255">Broadcast (255.255.255.255)</option>
    </select>

    <button type="submit">Calculate subnet</button>
  </form>
  <button id="export-btn" style="display: none; margin-top: 20px;">Export to HTML</button>
  <div id="error-msg" class="error" style="display:none;"></div>
  <div id="result" class="result" style="display:none;"></div>
</div>

<script>
  document.getElementById('ip-presets').addEventListener('change', (e) => {
    const ipInput = document.getElementById('ip');
    if(e.target.value) {
      ipInput.value = e.target.value;
    }
  });

  function isValidIp(ip) {
    const parts = ip.trim().split('.');
    if (parts.length !== 4) return false;
    for (const part of parts) {
      if (!/^\d+$/.test(part)) return false;
      const num = Number(part);
      if (num < 0 || num > 255) return false;
    }
    return true;
  }

  function toBinaryOctet(num) {
    return num.toString(2).padStart(8, '0');
  }

  function getIpClass(firstOctet) {
    if (firstOctet >= 0 && firstOctet <= 127) return 'A';
    if (firstOctet >= 128 && firstOctet <= 191) return 'B';
    if (firstOctet >= 192 && firstOctet <= 223) return 'C';
    if (firstOctet >= 224 && firstOctet <= 239) return 'D (Multicast)';
    if (firstOctet >= 240 && firstOctet <= 255) return 'E (Experimental)';
    return 'Unknown';
  }

  function getIpType(ipParts) {
    const [a,b,c,d] = ipParts;
    if (a === 10) return 'Private';
    if (a === 172 && b >= 16 && b <= 31) return 'Private';
    if (a === 192 && b === 168) return 'Private';
    if (a === 127) return 'Loopback';
    if (a === 169 && b === 254) return 'Link-local';
    if (a >= 224 && a <= 239) return 'Multicast';
    if (a === 255 && b === 255 && c === 255 && d === 255) return 'Broadcast';
    return 'Public';
  }

  function formatNumber(num) {
    return num.toLocaleString('en-US');
  }

  function calculateSubnet(ip, cidr) {
    cidr = Number(cidr);
    if (cidr < 0 || cidr > 32) return null;

    const ipParts = ip.trim().split('.').map(Number);

    const mask = (0xffffffff >>> (32 - cidr)) << (32 - cidr);
    const maskParts = [
      (mask >>> 24) & 0xff,
      (mask >>> 16) & 0xff,
      (mask >>> 8) & 0xff,
      mask & 0xff
    ];

    const ipNum = (ipParts[0] << 24) + (ipParts[1] << 16) + (ipParts[2] << 8) + ipParts[3];
    const networkNum = ipNum & mask;
    const networkParts = [
      (networkNum >>> 24) & 0xff,
      (networkNum >>> 16) & 0xff,
      (networkNum >>> 8) & 0xff,
      networkNum & 0xff
    ];

    const broadcastNum = networkNum | (~mask >>> 0);
    const broadcastParts = [
      (broadcastNum >>> 24) & 0xff,
      (broadcastNum >>> 16) & 0xff,
      (broadcastNum >>> 8) & 0xff,
      broadcastNum & 0xff
    ];

    const hosts = cidr < 31 ? (2 ** (32 - cidr) - 2) : (cidr === 31 ? 2 : 1);

    let firstHost = null, lastHost = null;
    if (hosts > 0) {
      firstHost = [
        networkParts[0],
        networkParts[1],
        networkParts[2],
        networkParts[3] + 1
      ];
      lastHost = [
        broadcastParts[0],
        broadcastParts[1],
        broadcastParts[2],
        broadcastParts[3] -1
      ];
    } else if (cidr === 31) {
      firstHost = networkParts;
      lastHost = broadcastParts;
    } else {
      firstHost = networkParts;
      lastHost = networkParts;
    }

    const wildcardParts = maskParts.map(octet => 255 - octet);
    const binaryMask = maskParts.map(toBinaryOctet).join('.');
    const ipClass = getIpClass(ipParts[0]);
    const ipType = getIpType(ipParts);
    const shortNotation = networkParts.join('.') + '/' + cidr;

    return {
      subnet_mask: maskParts.join('.'),
      network_address: networkParts.join('.'),
      broadcast_address: broadcastParts.join('.'),
      number_of_hosts: hosts,
      formatted_hosts: formatNumber(hosts),
      usable_range: `${firstHost.join('.')} - ${lastHost.join('.')}`,
      wildcard_mask: wildcardParts.join('.'),
      binary_subnet_mask: binaryMask,
      ip_class: ipClass,
      ip_type: ipType,
      short_notation: shortNotation
    };
  }

  // Function to handle the export to HTML
  document.getElementById('export-btn').addEventListener('click', function() {
    const resultContent = document.getElementById('result').innerHTML;
    
    const header = `
    <html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Subnet Calculation Result</title>
        <style>
            body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #f9fafb; margin: 0; padding: 2rem; color: #2e3440; }
            h1 { text-align: center; font-weight: 700; margin-bottom: 2rem; color: #1f2937; }
            .container { max-width: 912px; margin: 0 auto; background: white; border-radius: 10px; padding: 2rem 2.5rem; box-shadow: 0 8px 24px rgb(100 116 139 / 0.1); }
            .result { background: #e0e6f8; border: 1px solid #8EAFDA; border-radius: 8px; padding: 1.5rem 2rem; box-shadow: inset 0 0 12px #8EAFDA88; color: #1e2a4a; font-weight: 600; }
            table { width: 100%; border-collapse: collapse; font-size: 1.05rem; }
            table td { padding: 8px; color: #303136; }
            table td:first-child { font-weight: 700; color: #1e40af; }
        </style>
    </head>
    <body>
        <div class="container">
            <h1>Subnet Calculation Result</h1>
            <div class="result">${resultContent}</div>
        </div>
    </body>
    </html>
    `;
    
    const blob = new Blob([header], { type: 'text/html' });
    const link = document.createElement('a');
    link.href = URL.createObjectURL(blob);
    link.download = 'subnet-calculation-result.html'; 
    link.click();
  });

  document.getElementById('subnet-form').addEventListener('submit', (e) => {
    e.preventDefault();

    const ip = document.getElementById('ip').value;
    const cidr = document.getElementById('cidr').value;

    const errorDiv = document.getElementById('error-msg');
    const resultDiv = document.getElementById('result');

    errorDiv.style.display = 'none';
    resultDiv.style.display = 'none';
    errorDiv.textContent = '';
    resultDiv.innerHTML = '';

    if (!isValidIp(ip)) {
      errorDiv.textContent = 'Invalid IP address!';
      errorDiv.style.display = 'block';
      return;
    }
    if (!cidr) {
      errorDiv.textContent = 'Select a Subnet mask!';
      errorDiv.style.display = 'block';
      return;
    }

    const result = calculateSubnet(ip, cidr);

    if (!result) {
      errorDiv.textContent = 'Error calculating your subnet';
      errorDiv.style.display = 'block';
      return;
    }

    resultDiv.innerHTML = `
      <h2>Subnet Calculation Result:</h2>
      <table>
        <tr><td>CIDR notation:</td><td>${result.short_notation}</td></tr>
        <tr><td>IP Address:</td><td>${ip}</td></tr>
        <tr><td>Subnet Mask:</td><td>${result.subnet_mask}</td></tr>
        <tr><td>CIDR Prefix:</td><td>/${cidr}</td></tr>
        <tr><td>Maximum Possible Hosts:</td><td>${result.formatted_hosts}</td></tr>
        <tr><td>Usable Address Range:</td><td>${result.usable_range}</td></tr>
        <tr><td>Network Address:</td><td>${result.network_address}</td></tr>
        <tr><td>Broadcast Address:</td><td>${result.broadcast_address}</td></tr>
        <tr><td>IP Class:</td><td>${result.ip_class}</td></tr>
        <tr><td>IP Type:</td><td>${result.ip_type}</td></tr>
        <tr><td>Wildcard Mask:</td><td>${result.wildcard_mask}</td></tr>
        <tr><td>Binary Subnet Mask:</td><td>${result.binary_subnet_mask}</td></tr>
      </table>
    `;
    
    document.getElementById('export-btn').style.display = 'inline-block';
    resultDiv.style.display = 'block';
  });
</script>
</body>
</html>
