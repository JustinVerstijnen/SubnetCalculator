<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Subnet Calculator - justinverstijnen.nl</title>
<style>
  /* Basisreset */
  * {
    box-sizing: border-box;
  }
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: #f9fafb;
    margin: 0;
    padding: 2rem;
    color: #2e3440;
  }
  h1 {
    text-align: center;
    font-weight: 700;
    margin-bottom: 2rem;
    color: #1f2937;
  }
  /* Container */
  .container {
    max-width: 600px;
    margin: 0 auto;
    background: white;
    border-radius: 10px;
    padding: 2rem 2.5rem;
    box-shadow: 0 8px 24px rgb(100 116 139 / 0.1);
  }
  /* Form layout */
  form {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1.2rem 2rem;
    align-items: center;
    margin-bottom: 2rem;
  }
  label {
    font-weight: 600;
    font-size: 0.9rem;
    color: #374151;
  }
  input[type="text"],
  select,
  input[type="number"] {
    padding: 0.55rem 0.75rem;
    font-size: 1rem;
    border: 1px solid #d1d5db;
    border-radius: 6px;
    transition: border-color 0.3s ease;
    width: 100%;
  }
  input[type="text"]:focus,
  select:focus,
  input[type="number"]:focus {
    outline: none;
    border-color: #8EAFDA;
    box-shadow: 0 0 6px #2563ebaa;
  }
  button {
    grid-column: 1 / -1;
    background: #8EAFDA;
    color: white;
    font-weight: 700;
    font-size: 1.1rem;
    padding: 0.85rem;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    transition: background-color 0.3s ease;
  }
  button:hover {
    background: #1e40af;
  }
  /* Error message */
  .error {
    color: #dc2626;
    font-weight: 600;
    margin-bottom: 1rem;
    text-align: center;
  }
  /* Result box */
  .result {
    background: #eff6ff;
    border: 1px solid #93c5fd;
    border-radius: 8px;
    padding: 1.5rem 2rem;
    box-shadow: inset 0 0 12px #93c5fdaa;
  }
  .result h2 {
    margin-top: 0;
    margin-bottom: 1rem;
    color: #1e40af;
    font-weight: 700;
    text-align: center;
  }
  .result p {
    margin: 0.4rem 0;
    font-size: 1.05rem;
  }
  .logo-link {
  display: block;
  text-align: center;
  margin-bottom: 1rem;
}
.logo {
  max-width: 50px;
  height: auto;
  user-select: none;
  pointer-events: auto;
}
  .result strong {
    color: #1e3a8a;
  }
  /* Responsive */
  @media (max-width: 480px) {
    form {
      grid-template-columns: 1fr;
      gap: 1rem;
    }
    button {
      grid-column: 1;
    }
  }
</style>
</head>
<body>
<div class="container">
  <a href="https://justinverstijnen.nl" target="_blank" rel="noopener noreferrer" class="logo-link">
    <img src="https://justinverstijnen.nl/wp-content/uploads/2025/04/cropped-Logo-2.0-Transparant.png" alt="Justin Verstijnen Logo" class="logo" />
  </a>
  <h1>Subnet Calculator</h1>
  <form id="subnet-form" novalidate>
    <label for="ip">IP address*</label>
    <input type="text" id="ip" name="ip" placeholder="ex. 192.168.1.0" required />
    
<label for="cidr">Subnet mask*</label>
    <select id="cidr" name="cidr" required>
      <option value="">-- Kies een subnet mask --</option>
      <option value="8">/8 - 255.0.0.0</option>
      <option value="9">/9 - 255.128.0.0</option>
      <option value="10">/10 - 255.192.0.0</option>
      <option value="11">/11 - 255.224.0.0</option>
      <option value="12">/12 - 255.240.0.0</option>
      <option value="13">/13 - 255.248.0.0</option>
      <option value="14">/14 - 255.252.0.0</option>
      <option value="15">/15 - 255.254.0.0</option>
      <option value="16">/16 - 255.255.0.0</option>
      <option value="17">/17 - 255.255.128.0</option>
      <option value="18">/18 - 255.255.192.0</option>
      <option value="19">/19 - 255.255.224.0</option>
      <option value="20">/20 - 255.255.240.0</option>
      <option value="21">/21 - 255.255.248.0</option>
      <option value="22">/22 - 255.255.252.0</option>
      <option value="23">/23 - 255.255.254.0</option>
      <option value="24">/24 - 255.255.255.0</option>
      <option value="25">/25 - 255.255.255.128</option>
      <option value="26">/26 - 255.255.255.192</option>
      <option value="27">/27 - 255.255.255.224</option>
      <option value="28">/28 - 255.255.255.240</option>
      <option value="29">/29 - 255.255.255.248</option>
      <option value="30">/30 - 255.255.255.252</option>
      <option value="31">/31 - 255.255.255.254</option>
      <option value="32">/32 - 255.255.255.255</option>
    </select>
    
    <label for="ip-presets">Templates</label>
    <select id="ip-presets" aria-label="Choose template">
      <option value="">-- Kies een template --</option>
      <option value="10.0.0.0">Privé Class A (10.0.0.0)</option>
      <option value="172.16.0.0">Privé Class B (172.16.0.0)</option>
      <option value="192.168.0.0">Privé Class C (192.168.0.0)</option>
      <option value="127.0.0.1">Loopback (127.0.0.1)</option>
      <option value="169.254.0.0">Link-local (169.254.0.0)</option>
      <option value="224.0.0.0">Multicast (224.0.0.0)</option>
      <option value="255.255.255.255">Broadcast (255.255.255.255)</option>
    </select>

    <button type="submit">Calculate subnet</button>
  </form>

  <div id="error-msg" class="error" style="display:none;"></div>
  <div id="result" class="result" style="display:none;"></div>
</div>

<script>
  document.getElementById('ip-presets').addEventListener('change', (e) => {
    const ipInput = document.getElementById('ip');
    if(e.target.value) {
      ipInput.value = e.target.value;
    }
  });

  function isValidIp(ip) {
    const parts = ip.trim().split('.');
    if (parts.length !== 4) return false;
    for (const part of parts) {
      if (!/^\d+$/.test(part)) return false;
      const num = Number(part);
      if (num < 0 || num > 255) return false;
    }
    return true;
  }

  function toBinaryOctet(num) {
    return num.toString(2).padStart(8, '0');
  }

  function getIpClass(firstOctet) {
    if (firstOctet >= 0 && firstOctet <= 127) return 'A';
    if (firstOctet >= 128 && firstOctet <= 191) return 'B';
    if (firstOctet >= 192 && firstOctet <= 223) return 'C';
    if (firstOctet >= 224 && firstOctet <= 239) return 'D (Multicast)';
    if (firstOctet >= 240 && firstOctet <= 255) return 'E (Experimental)';
    return 'Unknown';
  }

  function getIpType(ipParts) {
    const [a,b,c,d] = ipParts;
    // Private ranges
    if (a === 10) return 'Private';
    if (a === 172 && b >= 16 && b <= 31) return 'Private';
    if (a === 192 && b === 168) return 'Private';
    if (a === 127) return 'Loopback';
    if (a === 169 && b === 254) return 'Link-local';
    if (a >= 224 && a <= 239) return 'Multicast';
    if (a === 255 && b === 255 && c === 255 && d === 255) return 'Broadcast';
    return 'Public';
  }

  function calculateSubnet(ip, cidr) {
    cidr = Number(cidr);
    if (cidr < 0 || cidr > 32) return null;

    const ipParts = ip.trim().split('.').map(Number);

    const mask = (0xffffffff >>> (32 - cidr)) << (32 - cidr);
    const maskParts = [
      (mask >>> 24) & 0xff,
      (mask >>> 16) & 0xff,
      (mask >>> 8) & 0xff,
      mask & 0xff
    ];

    const ipNum = (ipParts[0] << 24) + (ipParts[1] << 16) + (ipParts[2] << 8) + ipParts[3];
    const networkNum = ipNum & mask;
    const networkParts = [
      (networkNum >>> 24) & 0xff,
      (networkNum >>> 16) & 0xff,
      (networkNum >>> 8) & 0xff,
      networkNum & 0xff
    ];

    const broadcastNum = networkNum | (~mask >>> 0);
    const broadcastParts = [
      (broadcastNum >>> 24) & 0xff,
      (broadcastNum >>> 16) & 0xff,
      (broadcastNum >>> 8) & 0xff,
      broadcastNum & 0xff
    ];

    // Hosts calculation
    const hosts = cidr < 31 ? (2 ** (32 - cidr) - 2) : (cidr === 31 ? 2 : 1);

    // Usable host range (if hosts > 0)
    let firstHost = null, lastHost = null;
    if (hosts > 0) {
      firstHost = [
        networkParts[0],
        networkParts[1],
        networkParts[2],
        networkParts[3] + 1
      ];
      lastHost = [
        broadcastParts[0],
        broadcastParts[1],
        broadcastParts[2],
        broadcastParts[3] -1
      ];
    } else if (cidr === 31) {
      // /31 has 2 usable IPs (both addresses usable)
      firstHost = networkParts;
      lastHost = broadcastParts;
    } else {
      // /32 only one IP
      firstHost = networkParts;
      lastHost = networkParts;
    }

    // Wildcard mask (inverse of subnet mask)
    const wildcardParts = maskParts.map(octet => 255 - octet);

    // Binary subnet mask
    const binaryMask = maskParts.map(toBinaryOctet).join('.');

    // IP Class and Type
    const ipClass = getIpClass(ipParts[0]);
    const ipType = getIpType(ipParts);

    // Short notation: network + CIDR
    const shortNotation = networkParts.join('.') + ' /' + cidr;

    return {
      subnet_mask: maskParts.join('.'),
      network_address: networkParts.join('.'),
      broadcast_address: broadcastParts.join('.'),
      number_of_hosts: hosts,
      usable_range: `${firstHost.join('.')} - ${lastHost.join('.')}`,
      wildcard_mask: wildcardParts.join('.'),
      binary_subnet_mask: binaryMask,
      ip_class: ipClass,
      ip_type: ipType,
      short_notation: shortNotation
    };
  }

  document.getElementById('subnet-form').addEventListener('submit', (e) => {
    e.preventDefault();

    const ip = document.getElementById('ip').value;
    const cidr = document.getElementById('cidr').value;

    const errorDiv = document.getElementById('error-msg');
    const resultDiv = document.getElementById('result');

    errorDiv.style.display = 'none';
    resultDiv.style.display = 'none';
    errorDiv.textContent = '';
    resultDiv.innerHTML = '';

    if (!isValidIp(ip)) {
      errorDiv.textContent = 'Ongeldig IP-adres!';
      errorDiv.style.display = 'block';
      return;
    }
    if (!cidr) {
      errorDiv.textContent = 'Selecteer een subnet masker!';
      errorDiv.style.display = 'block';
      return;
    }

    const result = calculateSubnet(ip, cidr);

    if (!result) {
      errorDiv.textContent = 'Fout bij berekening!';
      errorDiv.style.display = 'block';
      return;
    }

    resultDiv.innerHTML = `
      <h2>Result of your subnet:</h2>
      <p><strong>IP address:</strong> ${ip}</p>
      <p><strong>CIDR network notation:</strong> /${cidr}</p>
      <p><strong>Subnet mask:</strong> ${result.subnet_mask}</p>
      <p><strong>Network address:</strong> ${result.network_address}</p>
      <p><strong>Broadcast address:</strong> ${result.broadcast_address}</p>
      <p><strong>Maximum hosts:</strong> ${result.number_of_hosts}</p>
      <p><strong>Usable Host IP Range:</strong> ${result.usable_range}</p>
      <p><strong>Wildcard Mask:</strong> ${result.wildcard_mask}</p>
      <p><strong>Binary Subnet Mask:</strong> ${result.binary_subnet_mask}</p>
      <p><strong>IP Class:</strong> ${result.ip_class}</p>
      <p><strong>IP Type:</strong> ${result.ip_type}</p>
      <p><strong>Short:</strong> ${result.short_notation}</p>
    `;
    resultDiv.style.display = 'block';
  });
</script>
</body>
</html>
